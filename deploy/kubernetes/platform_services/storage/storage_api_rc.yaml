apiVersion: v1
kind: ReplicationController
metadata:
  name: storage-api
  namespace: boxlinker
  labels:
    name: storage-api
    rc-krud: "boxlinker_centos-storage"
spec:
  replicas: 1
  selector:
    name: storage-api
  template:
    metadata:
      labels:
        name: storage-api
        logs: boxlinker-storage-api
    spec:
      imagePullSecrets:
      - name: registry-key
      containers:
      - name: storage-api
        imagePullPolicy: Always
        image: index.boxlinker.com/boxlinker/centos-storage:api-1.0.3
        ports:
        - containerPort: 9999
        env:
        - name: DB_SERVER01
          value: database
        - name: DB_SERVER02
          value: database
        - name: MQ_SERVER01
          value: rabbitmq
        - name: MQ_SERVER02
          value: rabbitmq
        - name: TOKEN_AUTH_API
          value: http://registry-api:8080/user/check_token_get
